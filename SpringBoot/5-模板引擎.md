> ### 渲染Web页面

模板引擎

- Thymeleaf
- FreeMarker
- Velocity
- Groovy
- Mustache

## Thymeleaf

默认的模板配置路径 `src/main/resources/templates`

默认的模板后缀`.html`

### 基本使用-渲染页面

加入依赖

```html
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-thymeleaf</artifactId>
</dependency>
```

Java页

**解析**

- `@Controller`修饰class 用来创建处理http请求的对象
- `@RequestMapping` 配置url映射

HTML页面

在`src/main/resources/templates`编写模板文件

```html
<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
	SuccessPage
</body>
</html>
```

### 基本使用-返回json

有时候编写接口的时候需要返回json数据那么在springboot怎么操作？

**添加注解@RestController**



@RestController也是一个组合注解`@ResponseBody` `@Controller`

- 创建Person Bean

  ```java
  public class Person {
      private String name;
      private Integer age;
      private String sex;
  
      public String getName() {
          return name;
      }
  
      public void setName(String name) {
          this.name = name;
      }
  
      public Integer getAge() {
          return age;
      }
  
      public void setAge(Integer age) {
          this.age = age;
      }
  
      public String getSex() {
          return sex;
      }
  
      public void setSex(String sex) {
          this.sex = sex;
      }
  
      @Override
      public String toString() {
          return "Person{" +
                  "name='" + name + '\'' +
                  ", age=" + age +
                  ", sex='" + sex + '\'' +
                  '}';
      }
  }
  ```

- Controller

  ```java
  import javax.servlet.http.HttpServlet;
  import javax.servlet.http.HttpServletRequest;
  import javax.servlet.http.HttpServletResponse;
  import org.springframework.stereotype.Controller;
  import org.springframework.ui.Model;
  import org.springframework.web.bind.annotation.RequestMapping;
  import org.springframework.web.bind.annotation.ResponseBody;
  import org.springframework.web.bind.annotation.RestController;
  
  @RestController
  public class DemoPerson {
  
      @RequestMapping("/getPer")
      public Person success(){
          Person per = new Person();
          per.setName("张三");
          per.setAge(15);
          per.setSex("男");
          return per;
      }
  }
  ```

  访问浏览器`http://127.0.0.1:8080/getPer`

  ```json
  {"name":"张三","age":15,"sex":"男"}
  ```

  **解析**

  主要在Controller上加 @RestController与@RequestMapping注解
  
  
  
  #### 使用fastjson依赖库
  
  fastjson是阿里巴巴开源JSON解析框架
  
  1. 添加依赖
  
  ```properties
  <dependency>
  	<groupId>com.alibaba</groupId>
  	<artifactId>fastjson</artifactId>
  	<version>1.2.49</version>
  </dependency>
  ```
  
  2. 简单用法
  
  ```java
  // toJson
  public static void main(String[] args) {
      ArrayList<Person> per = new ArrayList<>();
      Person p1 = new Person("Tony",15,"男");
      Person p2 = new Person("Amy",18,"女");
      per.add(p1);
      per.add(p2);
  
      String s1 = JSON.toJSONString(per);
      System.out.println(s1);
  }
  
  >> [{"age":15,"name":"Tony","sex":"男"},{"age":18,"name":"Amy","sex":"女"}]
  ```
  
  ```
  // 把JSON文本parse为JSONObject或者JSONArray
  public static final Object parse(String text);
  // 把JSON文本parse成JSONObject
  public static final JSONObject parseObject(String text)；
  // 把JSON文本parse为JavaBean
  public static final T parseObject(String text, Class clazz)
  // 把JSON文本parse成JSONArray
  public static final JSONArray parseArray(String text);
  //把JSON文本parse成JavaBean集合
  public static final List parseArray(String text, Class clazz);
  // 将JavaBean序列化为JSON文本
  public static final String toJSONString(Object object);
  // 将JavaBean序列化为带格式的JSON文本
  public static final String toJSONString(Object object, boolean prettyFormat);
  //将JavaBean转换为JSONObject或者JSONArray。
  public static final Object toJSON(Object javaObject)  
  ```
  
  


### 默认参数配置

在`application.properties`修改属性.比如模板路径等等

```properties
# Enable template caching.
spring.thymeleaf.cache=true 
# Check that the templates location exists.
sp00ring.thymeleaf.check-template-location=true 
# Content-Type value.
spring.thymeleaf.content-type=text/html 
# Enable MVC Thymeleaf view resolution.
spring.thymeleaf.enabled=true 
# Template encoding.
spring.thymeleaf.encoding=UTF-8 
# Comma-separated list of view names that should be excluded from resolution.
spring.thymeleaf.excluded-view-names= 
# Template mode to be applied to templates. See also StandardTemplateModeHandlers.
spring.thymeleaf.mode=HTML5 
# Prefix that gets prepended to view names when building a URL.
spring.thymeleaf.prefix=classpath:/templates/ 
# 0000000000000000000000000000000000000000Suffix that gets appended to view names when building a URL.
spring.thymeleaf.suffix=.html  spring.thymeleaf.template-resolver-order= # Order of the template resolver in the chain. spring.thymeleaf.view-names= # Comma-separated list of view names that can be resolved.
```
