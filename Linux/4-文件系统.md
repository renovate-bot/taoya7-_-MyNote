



文件系统是操作系统用来存储和管理文件的方法。



### 文件简介

Linux采用树状目录结构 最顶层的目录为`/`

```shell
tao@kali:~$ ls /

0     dev   initrd.img      lib32   lost+found  opt   run   sys  var
bin   etc   initrd.img.old  lib64   media       proc  sbin  tmp  vmlinuz
boot  home  lib             libx32  mnt         root  srv   usr  vmlinuz.old
```

![](http://itaolaity.com/20190622134552.png)

- `bin` 一般用户可用，启动时会用到的命令，即在文件系统还没被挂载时，也能够使用的命令
- `boot`开机启动设置相关文件
- `dev`接口设备文件目录，had表示硬盘dev时device的缩写。

- `etc`用来存放系统管理所需要的配置文件和子目录
- `home`用户主目录或FTP站点目录 ~用户名
- `lib`系统最基本的动态链接共享库和模块文件，几乎所有的应用程序都需要用到这些库
- `media`用于挂载本地磁盘或其他存储设备
- `mnt`装置的文件系统加载点，如光驱，软盘
- `opt`发行版的一些软件包
- `root`管理员的主目录
- `sbin`Root用户才能执行的命令
- `srv`存放服务进程所需要的数据文件
- `usr`存放用户使用的系统命令和应用程序所需要执行的程序
  - `bin`
  - `include`
  - `lib`
  - `local`
  - `share`
  - `sbin`
  - `src`
- `var`变量文件-在正常运行的系统中其内容不断变化的文件，如日志，脱机文件和临时电子邮件文件。
  - `account`
  - `cache`
  - `lib`
  - `lock`
  - `log`
  - `run`
  - `tmp`
  - `spool`
  - `mail`
- `lost-found`系统不正常关机后存放恢复的文件
- `tmp`存放各种临时文件

### 基本操作

`pwd`显示当前工作目录的绝对路径

```shell
tao@kali:~$ pwd
/home/tao
```





**新建目录**

```bash
mkdir (选项) (参数)

-m <目标属性>或--mode<目标属性>建立目录的同时设置目录的权限；
-p 或--parents 若所要建立目录的上层目录目前尚未建立，则会一并建立上层目录；
```

**删除目录**

删除空文件夹

```bash
rmdir (选项) (参数)

-p或--parents：删除指定目录后，若该目录的上层目录已变成空目录，则将其一并删除；
```

删除非空

```bash
rm -rf  dir

-r 递归处理参数
-f 强制删除所有文件
```

**创建链接文件**

`ln`

**文件复制**

将源文件或目录复制到目标文件或目录中

```shell
cp(选项)(参数)

-a：此参数的效果和同时指定"-dpR"参数相同；
-d：当复制符号连接时，把目标文件或目录也建立为符号连接，并指向与源文件或目录连接的原始文件或目录；
-f：强行复制文件或目录，不论目标文件或目录是否已存在；
-i：覆盖既有文件之前先询问用户；
-l：对源文件建立硬连接，而非复制文件；
-p：保留源文件或目录的属性；
-R/r：递归处理，将指定目录下的所有文件与子目录一并处理；
-s：对源文件建立符号连接，而非复制文件；
-u：使用这项参数后只会在源文件的更改时间较目标文件更新时或是名称相互对应的目标文件并不存在时，才复制文件；
-S：在备份文件时，用指定的后缀“SUFFIX”代替文件的默认后缀；
-b：覆盖已存在的文件目标前将目标文件备份；
-v：详细显示命令执行的操作。
```

**文件移动**

用来对文件或目录重新命名

```shell
mv(选项)(参数)
```

**查看文件内容**

```shell
cat(选项)(参数)

-n或--number：从1开始对所有输出的行数编号；
-b或--number-nonblank：和-n相似，只不过对于空白行不编号；
-s或--squeeze-blank：当遇到有连续两行以上的空白行，就代换为一行的空白行；
-A：显示不可打印字符，行尾显示“$”；
-e：等价于"-vE"选项；
-t：等价于"-vT"选项；
```

```shell
tao@kali:~$ cat -n main.c 
     1	#include <stdio.h>
     2	
     3	int main(){
     4	
     5		printf("Hello");
     6		return 0;
     7	}
     
tao@kali:~$ cat m1 m2 # 同时显示文件m1和m2的内容

tao@kali:~$ cat m1 m2 > file # 将文件m1和m2合并后放入文件file中
```

### 文件的种类

- 普通文件
- 目录文件
- 链接文件
- 设备文件
- 管道文件



### 文件的权限

**权限**

- 读 `R`
- 写 `W`
- 执行 `X`
- 无权限 `-`

![](image/1558192008545.png)

```shell
 -rw-r--r--   1 user  staff   651 Oct 12 12:53 .gitmodules
# ↑╰┬╯╰┬╯╰┬╯
# ┆ ┆  ┆  ╰┈ 0 其他人
# ┆ ┆  ╰┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈ g 属组
# ┆ ╰┈┈┈┈ u 属组
# ╰┈┈ 第一个字母 `d` 代表目录，`-` 代表普通文件
```

**10位字符表示**

0-确定文件类型

1-3 确定文件的所有者的权限

4-6 确定文件的同一组的权限

7-9 确定文件的其他用户的权限


- 0字符 确定了文件的类型(目录|文件|链接)
	- [d] 目录
	- [-] 普通文件
	- [l]链接文档
	- [b]接口设备
	- [c]串行设备
- r可读
- w可写
- x可执行

**数字表示**

`r,w,x` 分别也可以用数字4，2，1表示

```shell
drwxr-xr-x 2 tao tao 4096 6月  22 14:15 dir
-rw-r--r-- 1 tao tao    0 6月  22 14:15 file.txt
-rw-r--r-- 2 tao tao    0 6月  22 14:16 source.c
-rw-r--r-- 2 tao tao    0 6月  22 14:16 target.ln
```

解析

- 默认目录权限 755
- 默认文件权限 644

**改变权限**

用来变更文件或目录的权限

```shell
chmod(选项)(参数)

u  # 操作对象简称，用户user，文件或目录的所有者。
g  # 操作对象简称，同组用户group，文件或目录所属群组
o  # 操作对象简称，其它用户others
a  # 操作对象简称，所有用户all，系统默认使用此项
+  # 权限操作符，添加某些权限
-  # 权限操作符，取消某些权限
=  # 权限操作符，设置文件的权限为给定的权限
r  # 权限设定（英文），表示可读权限
w  # 权限设定（英文），表示可写权限
x  # 权限设定（英文），表示可执行权限
-  # 权限设定（英文字符），表示没有权限
X  # 权限设定，如果目标文件是可执行文件或目录，可给其设置可执行权限
s  # 权限设定，设置权限suid和sgid，使用权限组合“u+s”设定文件的用户的ID位，“g+s”设置组ID位
t  # 权限设定，只有目录或文件的所有者才可以删除目录下的文件
-c或——changes    # 效果类似“-v”参数，但仅回报更改的部分，如果文件权限已经改变，显示其操作信息；
-f或--quiet或——silent # 操作过程中不显示任何错误信息；
-R或——recursive  # 递归处理，将指令目录下的所有文件及子目录一并处理；
-v或——verbose    # 显示命令运行时的详细执行过程；
--reference=<参考文件或目录> # 把指定文件或目录的所属群组全部设成和参考文件或目录的所属群组相同；
<权限范围>+<权限设置> # 开启权限范围的文件或目录的该选项权限设置；
<权限范围>-<权限设置> # 关闭权限范围的文件或目录的该选项权限设置；
<权限范围>=<权限设置> # 指定权限范围的文件或目录的该选项权限设置；
--help    # 显示帮助信息
--version # 显示版本信息
```

案例

```shelll
chmod u=rwx,g=rw,o=r file 
chmod 764 file # 数字表示法

chmod -R /database 
```



## Vim编辑器

**三大模式**

- 命令模式`Command mode`
- 插入模式`Insert mode`
- 末行模式`Last line mode`

**模式转换**

命令模式 -> 插入模式 `iao`

插入模式 -> 命令模式 `esc`

命令模式 -> 末行模式 `:`

### 命令

**删除字符**

- `x`删除单个字符
- `dd`删除当前行
- `#dd` 向下删除几行`#`代表数字
- `#x`向下删除几个字符

**字符串查找**

- 向前查找`/字符串 回车`

- 向后查找`?字符串 回车`

- n继续查找下个目标

**显示行号**

- `:set nu`显示
- `:set nonu` 不显示

**关闭文件**

末行模式

- `:w` 保存
- `:q`退出
- `:wq` `:x`保存并退出
- `:q!`强制退出
- `:w!`强制保存
- `:wq!` 

命令模式

- `ZZ`保存并退出

**复制粘贴**

复制

- `yy`复制当前行

粘贴

- `p(小写)`将删除的或复制的内容，粘贴到当前光标下
- `P(大写)`…粘贴到当前光标上